"use strict";(self.webpackChunkSimulacro=self.webpackChunkSimulacro||[]).push([[191],{1191:(k,p,r)=>{r.r(p),r.d(p,{PeliculaModule:()=>Y});var s=r(6895),d=r(5450),i=r(433),h=r(1738),b=r(8814),u=r(7354),P=r(5226),f=r.n(P),e=r(8256),_=r(2833),A=r(5861),v=r(1391);function x(t,a){if(1&t&&(e.TgZ(0,"div",2)(1,"span",3),e._uU(2,"Cargando..."),e.qZA(),e._UZ(3,"div",4),e.qZA()),2&t){const o=e.oxw();e.Akn(o.anchoSpinner)}}function Z(t,a){if(1&t){const o=e.EpF();e.TgZ(0,"div",6)(1,"div",7),e.NdJ("click",function(){const c=e.CHM(o).$implicit,m=e.oxw(2);return e.KtG(m.actorSeleccionado(c))}),e.TgZ(2,"div",8)(3,"p",9),e._uU(4),e.qZA(),e.TgZ(5,"p")(6,"small",9),e._uU(7),e.qZA()()()()()}if(2&t){const o=a.$implicit;e.xp6(4),e.AsE("",o.nombre," ",o.apellido," "),e.xp6(3),e.hij(" ",o.pais.translations.es,"")}}function C(t,a){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,Z,8,3,"div",5),e.qZA()),2&t){const o=e.oxw();e.Akn(o.estilos),e.xp6(1),e.Q6J("ngForOf",o.actores)}}let T=(()=>{class t{constructor(o){this.actorService=o,this.spinner=!1,this.anchoSpinner="",this.OnActorSeleccionado=new e.vpe}ngOnInit(){var o=this;return(0,A.Z)(function*(){o.spinner=!0;let n=yield o.actorService.obtenerListaDeActoresDB();o.actores=n.sort((l,c)=>{if(null!=l.nombre&&null!=l.nombre&&null!=c.nombre&&null!=l.nombre){if(l.nombre.toLowerCase()<c.nombre.toLowerCase())return-1;if(l.nombre.toLowerCase()>c.nombre.toLowerCase())return 1}return 0}),o.spinner=!1})()}actorSeleccionado(o){this.OnActorSeleccionado.emit(o)}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(v.c))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-tabla-actor"]],inputs:{estilos:"estilos"},outputs:{OnActorSeleccionado:"OnActorSeleccionado"},decls:6,vars:2,consts:[["class","d-flex justify-content-around",3,"style",4,"ngIf","ngIfElse"],["lista",""],[1,"d-flex","justify-content-around"],[1,"fs-3","fw-bold"],[1,"spinner-border","text-danger","text-center",2,"align-self","center","scale","1.2"],["style","width: 100%;",4,"ngFor","ngForOf"],[2,"width","100%"],[1,"actores","border","bg-light","text-dark","p-0","m-1",2,"height","55px","border-radius","10px","width","95%",3,"click"],[1,"p-1"],[1,"p-0","m-0"]],template:function(o,n){if(1&o&&(e.TgZ(0,"div")(1,"h3"),e._uU(2,"Lista de Actores"),e.qZA(),e.YNc(3,x,4,2,"div",0),e.YNc(4,C,2,3,"ng-template",null,1,e.W1O),e.qZA()),2&o){const l=e.MAs(5);e.xp6(3),e.Q6J("ngIf",n.spinner)("ngIfElse",l)}},dependencies:[s.sg,s.O5],styles:["img[_ngcontent-%COMP%]{width:70px!important;height:50px!important}p[_ngcontent-%COMP%]{font-size:1em}.actores[_ngcontent-%COMP%]{cursor:pointer;width:240px}.actores[_ngcontent-%COMP%]:hover{background-color:green!important;color:#fff!important;font-weight:700}"]}),t})();function E(t,a){if(1&t&&(e.ynx(0),e.TgZ(1,"small",23),e._uU(2),e.qZA(),e.BQk()),2&t){const o=e.oxw();e.xp6(2),e.hij(" ",null==o.nombre?null:o.nombre.getError("campoVacio").mensaje," ")}}function N(t,a){if(1&t&&(e.TgZ(0,"option",24),e._uU(1),e.qZA()),2&t){const o=a.$implicit;e.s9C("value",o.value),e.xp6(1),e.hij(" ",o.text," ")}}function y(t,a){if(1&t&&(e.ynx(0),e.TgZ(1,"small",23),e._uU(2),e.qZA(),e.BQk()),2&t){const o=e.oxw();e.xp6(2),e.hij(" ",null==o.tipoPelicula?null:o.tipoPelicula.getError("campoVacio").mensaje," ")}}function w(t,a){if(1&t&&(e.ynx(0),e.TgZ(1,"small",23),e._uU(2),e.qZA(),e.BQk()),2&t){const o=e.oxw();e.xp6(2),e.hij(" ",null==o.fechaEstreno?null:o.fechaEstreno.getError("campoVacio").mensaje," ")}}function D(t,a){if(1&t&&(e.ynx(0),e.TgZ(1,"small",23),e._uU(2),e.qZA(),e.BQk()),2&t){const o=e.oxw();e.xp6(2),e.hij(" ",null==o.fechaEstreno?null:o.fechaEstreno.getError("formatoInvalido").mensaje," ")}}function I(t,a){if(1&t&&(e.ynx(0),e.TgZ(1,"small",23),e._uU(2),e.qZA(),e.BQk()),2&t){const o=e.oxw();e.xp6(2),e.hij(" ",null==o.fechaEstreno?null:o.fechaEstreno.getError("fechaInvalida").mensaje," ")}}function j(t,a){if(1&t&&(e.ynx(0),e.TgZ(1,"small",23),e._uU(2),e.qZA(),e.BQk()),2&t){const o=e.oxw();e.xp6(2),e.hij(" ",null==o.actorNombreCompleto?null:o.actorNombreCompleto.getError("campoVacio").mensaje," ")}}function U(t,a){if(1&t&&(e.ynx(0),e.TgZ(1,"small",23),e._uU(2),e.qZA(),e.BQk()),2&t){const o=e.oxw();e.xp6(2),e.hij(" ",null==o.cantidadDePublico?null:o.cantidadDePublico.getError("campoVacio").mensaje," ")}}function Q(t,a){if(1&t&&(e.ynx(0),e.TgZ(1,"small",23),e._uU(2),e.qZA(),e.BQk()),2&t){const o=e.oxw();e.xp6(2),e.hij(" ",null==o.cantidadDePublico?null:o.cantidadDePublico.getError("textoInvalido").mensaje," ")}}function J(t,a){if(1&t&&(e.ynx(0),e.TgZ(1,"small",23),e._uU(2),e.qZA(),e.BQk()),2&t){const o=e.oxw();e.xp6(2),e.hij(" ",null==o.cantidadDePublico?null:o.cantidadDePublico.getError("valorInvalido").mensaje," ")}}function q(t,a){if(1&t&&(e.ynx(0),e.TgZ(1,"small",23),e._uU(2),e.qZA(),e.BQk()),2&t){const o=e.oxw();e.xp6(2),e.hij(" ",null==o.fotoPelicula?null:o.fotoPelicula.getError("campoVacio").mensaje," ")}}function O(t,a){if(1&t&&(e.ynx(0),e.TgZ(1,"small",23),e._uU(2),e.qZA(),e.BQk()),2&t){const o=e.oxw();e.xp6(2),e.hij(" ",null==o.fotoPelicula?null:o.fotoPelicula.getError("archivoInvalido").mensaje," ")}}let S=(()=>{class t{get cantidadDePublico(){return this.form?.get("cantidadDePublico")}set cantidadDePublico(o){this.form?.get("cantidadDePublico")?.patchValue(o)}get fotoPelicula(){return this.form?.get("fotoPelicula")}set fotoPelicula(o){this.form?.get("fotoPelicula")?.patchValue(o)}get actorNombreCompleto(){return this.form?.get("actorNombreCompleto")}set actorNombreCompleto(o){this.form?.get("actorNombreCompleto")?.patchValue(o)}get tipoPelicula(){return this.form?.get("tipoPelicula")}set tipoPelicula(o){this.form?.get("tipoPelicula")?.patchValue(o)}get fechaEstreno(){return this.form?.get("fechaEstreno")}set fechaEstreno(o){this.form?.get("fechaEstreno")?.patchValue(o)}get nombre(){return this.form?.get("nombre")}set nombre(o){this.form?.get("nombre")?.patchValue(o)}constructor(o){this.peliculaService=o,this.guardando=!1,this.foto="",this.tiposDePelicula=[],this.tiposDePelicula=Object.entries(b.T).filter(n=>isNaN(n[0])).map(n=>({text:n[0],value:n[1]})),this.tiposDePelicula.unshift({text:"",value:-1}),this.validar()}guardar(){if(!this.form.invalid){this.guardando=!0;let o=new h.a;o.nombre=this.nombre.value,o.tipoPelicula=Number(this.tipoPelicula.value),o.fechaDeEstreno=new Date(this.fechaEstreno.value.replace("-","/")),o.cantidadPublico=Number(this.cantidadDePublico.value),o.rutaFoto=this.foto,o.actor=this.actor,this.peliculaService.cargarPeliculaDB(o).then(n=>{f().fire({title:"Alta exitosa!",text:`Se ha guardado la pelicula '${o.nombre}'`,icon:"success",timer:0,confirmButtonText:"Aceptar"}),this.limpiarFormulario(),this.guardando=!1}).catch(n=>{console.log(n),f().fire({title:"Ha ocurrido un error!",text:`Ha ocurrido un error al intentar guardar: '${n}'`,icon:"error",timer:0,confirmButtonText:"Aceptar"}),this.guardando=!1})}}imagenCargada(o=null){null!=o&&o.target.matches("[type=file]")&&(this.validarImagen(o)?this.foto="":this.obtenerUrlDeImagen(o))}validarImagen(o){let n=!1;var l=o.target.value,c=l.lastIndexOf(".")+1,m=l.substr(c,l.length).toLowerCase();return"jpg"!=m&&"jpeg"!=m&&"png"!=m&&(n=!0),n}obtenerUrlDeImagen(o){let n=o.target.files[0],l=new FileReader;l.onload=c=>{this.foto=c.target.result},l.readAsDataURL(n)}limpiarFormulario(){this.foto="",this.fotoPelicula="",this.actorNombreCompleto="",this.cantidadDePublico=0,this.fechaEstreno=null,this.nombre="",this.tipoPelicula=-1}actorSeleccionado(o){o&&(this.actor=o,this.actorNombreCompleto=o.nombre)}validar(){this.form=new i.cw({cantidadDePublico:new i.NI(""),nombre:new i.NI("",{validators:[(0,u.dn)()]}),fechaEstreno:new i.NI("",{validators:[(0,u.QB)()]}),tipoPelicula:new i.NI("",{validators:[(0,u.qe)()]}),actorNombreCompleto:new i.NI("",{validators:[(0,u.dn)()]}),fotoPelicula:new i.NI("",{validators:[(0,u.FQ)()]})},[(0,u.Ms)("cantidadDePublico")])}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(_.S))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-pelicula-alta"]],decls:49,vars:17,consts:[[1,"text-center","custom-font"],[1,"container","bg-dark","text-light","my-2","d-flex","justify-content-center"],[1,"mr-5","mt-2","w-50"],[1,"form-group",3,"formGroup"],["for","nombre",1,"form-label"],["type","text","id","nombre","name","nombre","formControlName","nombre",1,"form-control"],[4,"ngIf"],["for","tipoPelicula",1,"form-label"],["name","tipoPelicula","id","tipoPelicula","formControlName","tipoPelicula",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["for","fechaEstreno",1,"form-label"],["type","date","id","fechaEstreno","name","fechaEstreno","formControlName","fechaEstreno",1,"form-control"],["for","actor",1,"form-label"],["id","actor","readonly","","formControlName","actorNombreCompleto","name","actor",1,"form-control"],["for","cantidadDePublico",1,"form-label"],["type","number","id","cantidadDePublico","name","cantidadDePublico","formControlName","cantidadDePublico",1,"form-control"],["for","fotoPelicula",1,"form-label"],["type","file","formControlName","fotoPelicula","name","fotoPelicula","id","fotoPelicula","accept","image/png, image/jpeg, image/jpg",1,"form-control",3,"multiple","change"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-outline-light","m-2",3,"disabled","click"],[1,"spinner-border","spinner-border-sm",3,"hidden"],[1,"ml-5","w-25"],["estilos","height: 400px !important; overflow-y: auto;",3,"OnActorSeleccionado"],[1,"d-block","text-danger"],[3,"value"]],template:function(o,n){1&o&&(e.TgZ(0,"h3",0),e._uU(1,"Alta pel\xedcula"),e.qZA(),e.TgZ(2,"div",1)(3,"div",2)(4,"form",3)(5,"div")(6,"label",4),e._uU(7,"Nombre"),e.qZA(),e._UZ(8,"input",5),e.YNc(9,E,3,1,"ng-container",6),e.qZA(),e.TgZ(10,"div")(11,"label",7),e._uU(12,"Tipo de Pel\xedcula"),e.qZA(),e.TgZ(13,"select",8),e.YNc(14,N,2,2,"option",9),e.qZA(),e.YNc(15,y,3,1,"ng-container",6),e.qZA(),e.TgZ(16,"div")(17,"label",10),e._uU(18,"Fecha de Estreno"),e.qZA(),e._UZ(19,"input",11),e.YNc(20,w,3,1,"ng-container",6),e.YNc(21,D,3,1,"ng-container",6),e.YNc(22,I,3,1,"ng-container",6),e.qZA(),e.TgZ(23,"div")(24,"label",12),e._uU(25,"Actor"),e.qZA(),e._UZ(26,"input",13),e.YNc(27,j,3,1,"ng-container",6),e.qZA(),e.TgZ(28,"div")(29,"label",14),e._uU(30,"Cantidad de p\xfablico"),e.qZA(),e._UZ(31,"input",15),e.YNc(32,U,3,1,"ng-container",6),e.YNc(33,Q,3,1,"ng-container",6),e.YNc(34,J,3,1,"ng-container",6),e.qZA(),e.TgZ(35,"div")(36,"label",16),e._uU(37,"Foto"),e.qZA(),e.TgZ(38,"input",17),e.NdJ("change",function(c){return n.imagenCargada(c)}),e.qZA(),e.YNc(39,q,3,1,"ng-container",6),e.YNc(40,O,3,1,"ng-container",6),e.qZA(),e.TgZ(41,"div",18)(42,"button",19),e.NdJ("click",function(){return n.limpiarFormulario()}),e._uU(43,"Limpiar"),e.qZA(),e.TgZ(44,"button",19),e.NdJ("click",function(){return n.guardar()}),e._uU(45,"Guardar "),e._UZ(46,"span",20),e.qZA()()()(),e.TgZ(47,"div",21)(48,"app-tabla-actor",22),e.NdJ("OnActorSeleccionado",function(c){return n.actorSeleccionado(c)}),e.qZA()()()),2&o&&(e.xp6(4),e.Q6J("formGroup",n.form),e.xp6(5),e.Q6J("ngIf",null==n.nombre?null:n.nombre.hasError("campoVacio")),e.xp6(5),e.Q6J("ngForOf",n.tiposDePelicula),e.xp6(1),e.Q6J("ngIf",null==n.tipoPelicula?null:n.tipoPelicula.hasError("campoVacio")),e.xp6(5),e.Q6J("ngIf",null==n.fechaEstreno?null:n.fechaEstreno.hasError("campoVacio")),e.xp6(1),e.Q6J("ngIf",null==n.fechaEstreno?null:n.fechaEstreno.hasError("formatoInvalido")),e.xp6(1),e.Q6J("ngIf",null==n.fechaEstreno?null:n.fechaEstreno.hasError("fechaInvalida")),e.xp6(5),e.Q6J("ngIf",null==n.actorNombreCompleto?null:n.actorNombreCompleto.hasError("campoVacio")),e.xp6(5),e.Q6J("ngIf",null==n.cantidadDePublico?null:n.cantidadDePublico.hasError("campoVacio")),e.xp6(1),e.Q6J("ngIf",null==n.cantidadDePublico?null:n.cantidadDePublico.hasError("textoInvalido")),e.xp6(1),e.Q6J("ngIf",null==n.cantidadDePublico?null:n.cantidadDePublico.hasError("valorInvalido")),e.xp6(4),e.Q6J("multiple",!1),e.xp6(1),e.Q6J("ngIf",null==n.fotoPelicula?null:n.fotoPelicula.hasError("campoVacio")),e.xp6(1),e.Q6J("ngIf",null==n.fotoPelicula?null:n.fotoPelicula.hasError("archivoInvalido")),e.xp6(2),e.Q6J("disabled",n.guardando),e.xp6(2),e.Q6J("disabled",n.guardando||n.form.invalid),e.xp6(2),e.Q6J("hidden",!n.guardando))},dependencies:[s.sg,s.O5,i._Y,i.YN,i.Kr,i.Fj,i.wV,i.EJ,i.JJ,i.JL,i.sg,i.u,T],styles:[".mensaje-error[_ngcontent-%COMP%]{color:red}.custom-font[_ngcontent-%COMP%]{font-size:3em!important;font-weight:700!important}"]}),t})();var F=r(6543);let g=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-pelicula-listado"]],decls:1,vars:0,template:function(o,n){1&o&&e._UZ(0,"app-tabla-pelicula")},dependencies:[F.k]}),t})();const B=[{path:"",children:[{path:"",component:g},{path:"alta",component:S},{path:"listado",component:g}]}];let V=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.Bz.forChild(B),d.Bz]}),t})(),Y=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[s.ez,V]}),t})()}}]);